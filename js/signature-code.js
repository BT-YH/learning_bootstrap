const signature = document.getElementById("signature");
const signature_ctx = signature.getContext("2d");
signature_ctx.lineWidth = 3;

function animate_signature() {
  signature_ctx.clearRect(0, 0, signature.width, signature.height);
  let point_groups = [
    [
      [157, 112],
      [157, 119],
      [154, 129],
      [152, 140],
      [148, 155],
      [143, 173],
      [137, 190],
      [131, 209],
      [123, 227],
      [116, 244],
      [108, 260],
      [102, 274],
      [96, 285],
      [91, 294],
      [88, 300],
      [87, 303],
      [86, 305],
      [86, 306],
      [83, 301],
      [83, 295],
      [83, 287],
      [83, 277],
      [83, 267],
      [86, 255],
      [89, 243],
      [93, 229],
      [99, 217],
      [106, 204],
      [112, 194],
      [119, 183],
      [127, 174],
      [137, 167],
      [149, 158],
      [162, 149],
      [174, 143],
      [186, 137],
      [197, 132],
      [207, 128],
      [216, 125],
      [222, 124],
      [225, 123],
      [227, 123],
      [229, 123],
      [230, 123],
      [230, 125],
      [231, 127],
      [232, 130],
      [232, 134],
      [230, 138],
      [223, 147],
      [213, 154],
      [202, 163],
      [186, 172],
      [170, 180],
      [151, 190],
      [136, 199],
      [122, 207],
      [110, 214],
      [101, 222],
      [95, 225],
      [91, 228],
      [90, 229],
      [90, 230],
      [90, 231],
      [91, 232],
      [98, 234],
      [107, 235],
      [124, 235],
      [145, 235],
      [169, 235],
      [194, 235],
      [219, 235],
      [239, 235],
      [257, 236],
      [270, 239],
      [277, 241],
      [279, 242],
      [280, 243],
      [280, 246],
      [276, 251],
      [271, 257],
      [261, 265],
      [253, 272],
      [241, 281],
      [229, 289],
      [216, 295],
      [203, 302],
      [186, 309],
      [169, 314],
      [151, 317],
      [134, 321],
      [119, 324],
      [105, 326],
      [96, 326],
      [88, 326],
      [82, 326],
      [79, 326],
      [77, 326],
      [76, 325],
      [275, 324],
      [76, 323],
      [77, 322],
      [78, 322],
      [80, 321],
      [83, 319],
      [88, 317],
      [92, 314],
      [333, 226],
      [330, 226],
      [326, 225],
      [321, 225],
      [313, 226],
      [304, 229],
      [295, 231],
      [285, 236],
      [276, 241],
      [266, 246],
      [258, 254],
      [251, 261],
      [246, 270],
      [244, 276],
      [243, 283],
      [243, 288],
      [244, 293],
      [245, 296],
      [247, 298],
      [250, 300],
      [252, 300],
      [256, 300],
      [262, 297],
      [267, 293],
      [274, 288],
      [283, 279],
      [290, 272],
      [299, 264],
      [305, 258],
      [310, 252],
      [314, 247],
      [316, 244],
      [316, 242],
      [316, 241],
      [316, 243],
      [316, 250],
      [315, 258],
      [313, 267],
      [313, 276],
      [313, 285],
      [313, 291],
      [314, 296],
      [316, 302],
      [318, 305],
      [320, 307],
      [323, 309],
      [324, 310],
      [325, 310],
      [327, 310],
      [328, 310],
      [333, 304],
      [335, 299],
      [337, 294],
      [337, 289],
      [337, 282],
      [337, 273],
      [336, 268],
      [370, 232],
      [375, 232],
      [379, 232],
      [383, 233],
      [385, 235],
      [387, 237],
      [390, 241],
      [390, 245],
      [391, 250],
      [391, 256],
      [390, 261],
      [388, 268],
      [386, 272],
      [383, 277],
      [381, 280],
      [378, 282],
      [376, 283],
      [375, 283],
      [375, 284],
      [374, 284],
      [374, 283],
      [376, 275],
      [378, 267],
      [383, 258],
      [388, 250],
      [394, 243],
      [401, 238],
      [407, 233],
      [412, 231],
      [414, 230],
      [417, 230],
      [419, 230],
      [421, 232],
      [424, 235],
      [426, 239],
      [428, 243],
      [429, 246],
      [429, 250],
      [429, 254],
      [429, 258],
      [428, 261],
      [427, 263],
      [425, 266],
      [423, 268],
      [422, 270],
      [421, 271],
      [462, 241],
      [462, 241],
      [465, 242],
      [467, 244],
      [470, 246],
      [472, 250],
      [476, 255],
      [477, 259],
      [479, 263],
      [479, 267],
      [480, 271],
      [480, 276],
      [478, 279],
      [477, 283],
      [475, 286],
      [473, 289],
      [472, 291],
      [471, 293],
      [470, 293],
      [473, 286],
      [477, 280],
      [483, 270],
      [490, 260],
      [498, 250],
      [508, 241],
      [517, 235],
      [523, 231],
      [527, 230],
      [529, 230],
      [530, 230],
      [531, 231],
      [531, 234],
      [532, 238],
      [532, 243],
      [532, 249],
      [533, 253],
      [534, 258],
      [536, 261],
      [537, 263],
      [539, 265],
      [541, 266],
      [543, 267],
      [546, 267],
      [548, 267],
      [550, 268],
      [554, 268],
      [557, 268],
      [561, 268],
      [565, 268],
      [569, 268],
      [574, 268],
      [580, 269],
      [587, 270],
      [592, 270],
      [599, 271],
      [605, 272],
      [609, 272],
      [613, 272],
      [615, 272],
      [616, 272],
      [617, 272],
      [619, 272],
      [626, 270],
      [634, 268],
      [643, 265],
      [652, 262],
      [659, 257],
      [666, 252],
      [670, 248],
      [672, 246],
      [673, 246],
      [673, 245],
      [673, 246],
      [671, 254],
      [667, 265],
      [664, 277],
      [660, 288],
      [655, 303],
      [650, 318],
      [645, 334],
      [639, 352],
      [629, 380],
      [622, 394],
      [617, 407],
      [611, 417],
      [606, 423],
      [601, 430],
      [595, 435],
      [589, 440],
      [580, 444],
      [572, 446],
      [563, 447],
      [554, 447],
      [543, 447],
      [532, 444],
      [519, 439],
      [504, 431],
      [489, 420],
      [474, 406],
      [460, 392],
      [448, 377],
      [438, 364],
      [430, 350],
      [427, 339],
      [427, 331],
      [427, 326],
      [429, 321],
      [433, 318],
      [441, 315],
      [453, 313],
      [466, 312],
      [485, 312],
      [505, 315],
      [529, 316],
      [555, 318],
      [581, 320],
      [610, 321],
      [635, 321],
      [658, 321],
      [674, 320],
      [685, 317],
      [691, 314],
      [693, 311],
      [694, 309],
      [694, 307],
      [694, 305],
      [694, 303],
      [694, 302],
      [694, 301],
      [692, 299],
      [690, 297],
    ],
    [
      [724, 140],
      [728, 141],
      [736, 142],
      [746, 142],
      [762, 142],
      [781, 142],
      [804, 141],
      [828, 139],
      [853, 137],
      [878, 135],
      [901, 134],
      [921, 134],
      [944, 132],
      [948, 131],
      [949, 131],
      [948, 132],
      [948, 133],
      [947, 134],
      [946, 135],
      [945, 136],
      [944, 137],
      [942, 137],
      [940, 138],
      [937, 138],
      [933, 138],
      [885, 158],
      [885, 163],
      [885, 170],
      [885, 178],
      [885, 187],
      [884, 199],
      [884, 212],
      [883, 228],
      [882, 244],
      [879, 262],
      [877, 278],
      [875, 292],
      [873, 303],
      [872, 313],
      [872, 321],
      [872, 329],
      [872, 333],
      [872, 339],
      [872, 341],
      [872, 342],
      [872, 343],
      [872, 344],
    ],
  ];
  let j = 0;
  let i = 0;

  let intervalID = setInterval(() => {
    signature_ctx.beginPath();
    signature_ctx.moveTo(point_groups[j][i][0], point_groups[j][i][1]);
    i += 2;
    signature_ctx.lineTo(point_groups[j][i][0], point_groups[j][i][1]);
    signature_ctx.stroke();

    // console.log(`j: ${j}`);
    // console.log(`i: ${i}`);

    if (i >= point_groups[j].length - 1) {
      j++;
      i = 0;
    }
    if (j >= point_groups.length) {
      clearInterval(intervalID);
    }
  }, 20);
}

window.addEventListener("scroll", viewtest);
function viewtest() {
  var position = signature.getBoundingClientRect();
  if (position.top >= 0 && position.bottom <= window.innerHeight) {
    animate_signature();
    window.removeEventListener("scroll", viewtest);
  }
}

viewtest();
